<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pokémon Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
            image-rendering: pixelated;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #2c3e50;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            color: #ecf0f1;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: 10px;
        }

        .game-header {
            text-align: center;
            width: 100%;
            padding: 10px;
            background: #34495e;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .game-title {
            font-size: 24px;
            margin-bottom: 5px;
            color: #f1c40f;
            text-shadow: 2px 2px 0 #7d6608;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            font-size: 14px;
            margin-top: 5px;
        }

        .game-area {
            position: relative;
            width: 600px;
            height: 400px;
            background: #27ae60;
            border: 4px solid #2c3e50;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        #gameCanvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 100%;
        }

        .d-pad {
            display: grid;
            grid-template-areas:
                ". up ."
                "left . right"
                ". down .";
            gap: 5px;
            margin-bottom: 10px;
        }

        .d-pad button {
            width: 60px;
            height: 60px;
            background: #3498db;
            border: none;
            border-radius: 8px;
            font-size: 24px;
            color: white;
            box-shadow: 0 4px 0 #2980b9;
            cursor: pointer;
            user-select: none;
            transition: all 0.1s;
        }

        .d-pad button:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #2980b9;
        }

        .d-pad button:nth-child(1) { grid-area: up; }
        .d-pad button:nth-child(2) { grid-area: left; }
        .d-pad button:nth-child(3) { grid-area: right; }
        .d-pad button:nth-child(4) { grid-area: down; }

        .action-buttons {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .action-buttons button {
            padding: 12px 24px;
            background: #e74c3c;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            color: white;
            box-shadow: 0 4px 0 #c0392b;
            cursor: pointer;
            user-select: none;
            transition: all 0.1s;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .action-buttons button:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #c0392b;
        }

        .action-buttons button:nth-child(2) {
            background: #9b59b6;
            box-shadow: 0 4px 0 #8e44ad;
        }

        .action-buttons button:nth-child(2):active {
            box-shadow: 0 0 0 #8e44ad;
        }

        .message-box {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #f1c40f;
            border-radius: 10px;
            text-align: center;
            font-size: 16px;
            line-height: 1.4;
            z-index: 10;
            display: none;
        }

        .message-box button {
            margin-top: 10px;
            padding: 8px 16px;
            background: #3498db;
            border: none;
            border-radius: 5px;
            color: white;
            font-family: 'Courier New', monospace;
            cursor: pointer;
        }

        .pokemon-caught {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 5px;
        }

        .pokeball {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 2px solid black;
            position: relative;
        }

        .pokeball:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: black;
            transform: translateY(-1px);
        }

        .pokeball:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 6px;
            height: 6px;
            background: white;
            border: 2px solid black;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .pokeball.caught {
            background: #e74c3c;
        }

        @media (max-width: 600px) {
            .game-area {
                width: 100%;
                height: 60vh;
            }
            
            .d-pad button {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">POKÉMON ADVENTURE</h1>
            <div class="game-stats">
                <div>Pokémon Caught: <span id="caughtCount">0</span>/5</div>
                <div>Steps: <span id="stepCount">0</span></div>
            </div>
        </div>
        
        <div class="game-area">
            <canvas id="gameCanvas" width="600" height="400"></canvas>
            
            <div class="pokemon-caught">
                <div class="pokeball"></div>
                <div class="pokeball"></div>
                <div class="pokeball"></div>
                <div class="pokeball"></div>
                <div class="pokeball"></div>
            </div>
            
            <div class="message-box" id="messageBox">
                <p id="messageText"></p>
                <button id="closeMessage">OK</button>
            </div>
        </div>
        
        <div class="controls">
            <div class="d-pad">
                <button id="upBtn">↑</button>
                <button id="leftBtn">←</button>
                <button id="rightBtn">→</button>
                <button id="downBtn">↓</button>
            </div>
            
            <div class="action-buttons">
                <button id="catchBtn">CATCH</button>
                <button id="resetBtn">RESET</button>
            </div>
        </div>
    </div>

    <script>
        // Game elements
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');
        const closeMessage = document.getElementById('closeMessage');
        const caughtCount = document.getElementById('caughtCount');
        const stepCount = document.getElementById('stepCount');
        const pokeballs = document.querySelectorAll('.pokeball');
        
        // Control buttons
        const upBtn = document.getElementById('upBtn');
        const downBtn = document.getElementById('downBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const catchBtn = document.getElementById('catchBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        // Game state
        const gameState = {
            player: {
                x: 300,
                y: 200,
                width: 23,
                height: 23,
                speed: 3,
                direction: 'down'
            },
            pokemons: [],
            caughtPokemons: 0,
            steps: 0,
            messages: [
                "You caught Pikachu! It's super cute and ready to join your team!",
                "Charmander is now yours! Its fiery tail will light your way!",
                "Squirtle joined your team! Get ready for some water adventures!",
                "Bulbasaur is caught! This grass-type Pokémon is a loyal companion!",
                "Jigglypuff is now yours! Get ready for some soothing lullabies!"
            ],
            pokemonNames: ["Pikachu", "Charmander", "Squirtle", "Bulbasaur", "Jigglypuff"],
            pokemonColors: ["#F8D030", "#F08030", "#6890F0", "#78C850", "#EE99AC"]
        };
        
        // Initialize game
        function initGame() {
            // Reset game state
            gameState.player.x = 300;
            gameState.player.y = 200;
            gameState.caughtPokemons = 0;
            gameState.steps = 0;
            gameState.pokemons = [];
            
            // Update UI
            caughtCount.textContent = gameState.caughtPokemons;
            stepCount.textContent = gameState.steps;
            
            // Reset pokeballs
            pokeballs.forEach(ball => ball.classList.remove('caught'));
            
            // Create pokemons
            for (let i = 0; i < 5; i++) {
                gameState.pokemons.push({
                    id: i,
                    x: Math.random() * (canvas.width - 20),
                    y: Math.random() * (canvas.height - 20),
                    width: 20,
                    height: 20,
                    caught: false
                });
            }
            
            // Draw initial state
            drawGame();
        }
        
        // Draw game elements
        function drawGame() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grass background
            drawGrass();
            
            // Draw pokemons
            gameState.pokemons.forEach(pokemon => {
                if (!pokemon.caught) {
                    drawPokemon(pokemon);
                }
            });
            
            // Draw player
            drawPlayer();
        }
        
        // Draw grass background
        function drawGrass() {
            ctx.fillStyle = '#27ae60';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw grass patches
            ctx.fillStyle = '#2ecc71';
            for (let i = 0; i < 50; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                ctx.fillRect(x, y, 3, 8);
            }
        }
        
        // Draw a pokemon
        function drawPokemon(pokemon) {
            const color = gameState.pokemonColors[pokemon.id];
            
            // Body
            ctx.fillStyle = color;
            ctx.fillRect(pokemon.x, pokemon.y, pokemon.width, pokemon.height);
            
            // Eyes
            ctx.fillStyle = 'white';
            ctx.fillRect(pokemon.x + 4, pokemon.y + 5, 4, 4);
            ctx.fillRect(pokemon.x + 12, pokemon.y + 5, 4, 4);
            
            ctx.fillStyle = 'black';
            ctx.fillRect(pokemon.x + 5, pokemon.y + 6, 2, 2);
            ctx.fillRect(pokemon.x + 13, pokemon.y + 6, 2, 2);
            
            // Mouth
            ctx.fillStyle = 'black';
            ctx.fillRect(pokemon.x + 7, pokemon.y + 12, 6, 2);
        }
        
        // Draw player character
        function drawPlayer() {
            const p = gameState.player;
            
            // Body
            ctx.fillStyle = '#3498db';
            ctx.fillRect(p.x, p.y, p.width, p.height);
            
            // Face (changes based on direction)
            ctx.fillStyle = 'white';
            if (p.direction === 'down') {
                // Eyes looking down
                ctx.fillRect(p.x + 6, p.y + 8, 3, 3);
                ctx.fillRect(p.x + 14, p.y + 8, 3, 3);
                // Mouth
                ctx.fillRect(p.x + 9, p.y + 15, 5, 2);
            } else if (p.direction === 'up') {
                // Eyes looking up
                ctx.fillRect(p.x + 6, p.y + 12, 3, 3);
                ctx.fillRect(p.x + 14, p.y + 12, 3, 3);
                // Mouth
                ctx.fillRect(p.x + 9, p.y + 7, 5, 2);
            } else if (p.direction === 'left') {
                // Eyes looking left
                ctx.fillRect(p.x + 6, p.y + 6, 3, 3);
                ctx.fillRect(p.x + 6, p.y + 14, 3, 3);
                // Mouth
                ctx.fillRect(p.x + 12, p.y + 10, 2, 2);
            } else if (p.direction === 'right') {
                // Eyes looking right
                ctx.fillRect(p.x + 14, p.y + 6, 3, 3);
                ctx.fillRect(p.x + 14, p.y + 14, 3, 3);
                // Mouth
                ctx.fillRect(p.x + 9, p.y + 10, 2, 2);
            }
            
            // Hat
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(p.x + 4, p.y - 3, p.width - 8, 6);
            ctx.fillRect(p.x + 2, p.y + 3, p.width - 4, 3);
        }
        
        // Move player
        function movePlayer(direction) {
            const p = gameState.player;
            p.direction = direction;
            
            let newX = p.x;
            let newY = p.y;
            
            if (direction === 'up') newY -= p.speed;
            if (direction === 'down') newY += p.speed;
            if (direction === 'left') newX -= p.speed;
            if (direction === 'right') newX += p.speed;
            
            // Boundary checking
            if (newX >= 0 && newX <= canvas.width - p.width) {
                p.x = newX;
            }
            if (newY >= 0 && newY <= canvas.height - p.height) {
                p.y = newY;
            }
            
            // Increment steps
            gameState.steps++;
            stepCount.textContent = gameState.steps;
            
            // Redraw game
            drawGame();
        }
        
        // Check for pokemon collision
        function checkPokemonCollision() {
            const p = gameState.player;
            
            for (let pokemon of gameState.pokemons) {
                if (pokemon.caught) continue;
                
                if (p.x < pokemon.x + pokemon.width &&
                    p.x + p.width > pokemon.x &&
                    p.y < pokemon.y + pokemon.height &&
                    p.y + p.height > pokemon.y) {
                    return pokemon;
                }
            }
            
            return null;
        }
        
        // Catch pokemon
        function catchPokemon() {
            const pokemon = checkPokemonCollision();
            
            if (pokemon) {
                pokemon.caught = true;
                gameState.caughtPokemons++;
                
                // Update UI
                caughtCount.textContent = gameState.caughtPokemons;
                pokeballs[pokemon.id].classList.add('caught');
                
                // Show message
                showMessage(gameState.messages[pokemon.id]);
                
                // Check if all pokemons are caught
                if (gameState.caughtPokemons === 5) {
                    setTimeout(() => {
                        showMessage("Congratulations! You've caught all the Pokémon! You are a true Pokémon Master!");
                    }, 1500);
                }
            } else {
                showMessage("No Pokémon nearby to catch! Get closer to a Pokémon first.");
            }
        }
        
        // Show message
        function showMessage(message) {
            messageText.textContent = message;
            messageBox.style.display = 'block';
        }
        
        // Close message
        closeMessage.addEventListener('click', () => {
            messageBox.style.display = 'none';
        });
        
        // Event listeners for controls
        upBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            movePlayer('up');
        });
        
        downBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            movePlayer('down');
        });
        
        leftBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            movePlayer('left');
        });
        
        rightBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            movePlayer('right');
        });
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowUp') movePlayer('up');
            if (e.key === 'ArrowDown') movePlayer('down');
            if (e.key === 'ArrowLeft') movePlayer('left');
            if (e.key === 'ArrowRight') movePlayer('right');
            if (e.key === ' ' || e.key === 'Enter') catchPokemon();
        });
        
        // Catch button
        catchBtn.addEventListener('click', catchPokemon);
        
        // Reset button
        resetBtn.addEventListener('click', initGame);
        
        // Initialize game
        initGame();
    </script>
</body>
</html>